function q3(t,n,r,o){let Y=[0,0,0];Y=[t[0]+u(t,[.3333333333333333,.3333333333333333,.3333333333333333]),t[1]+u(t,[.3333333333333333,.3333333333333333,.3333333333333333]),t[2]+u(t,[.3333333333333333,.3333333333333333,.3333333333333333])];let e=F(Y);const A=h3(Y),P=o3([A[0],A[1],A[0]],[A[1],A[2],A[2]]),Z=[1-P[0],1-P[1],1-P[2]],i3=[Z[2],P[0],P[1]],f3=[Z[0],Z[1],P[2]],$=M3(i3,f3),b=l3(i3,f3);let i=[e[0]+$[0],e[1]+$[1],e[2]+$[2]],f=[e[0]+b[0],e[1]+b[1],e[2]+b[2]],s=[e[0]+1,e[1]+1,e[2]+1],l=[0,0,0],h=[0,0,0],a=[0,0,0],m=[0,0,0];l=[e[0]-u(e,[.16666666666666666,.16666666666666666,.16666666666666666]),e[1]-u(e,[.16666666666666666,.16666666666666666,.16666666666666666]),e[2]-u(e,[.16666666666666666,.16666666666666666,.16666666666666666])],h=[i[0]-u(i,[.16666666666666666,.16666666666666666,.16666666666666666]),i[1]-u(i,[.16666666666666666,.16666666666666666,.16666666666666666]),i[2]-u(i,[.16666666666666666,.16666666666666666,.16666666666666666])],a=[f[0]-u(f,[.16666666666666666,.16666666666666666,.16666666666666666]),f[1]-u(f,[.16666666666666666,.16666666666666666,.16666666666666666]),f[2]-u(f,[.16666666666666666,.16666666666666666,.16666666666666666])],m=[s[0]-u(s,[.16666666666666666,.16666666666666666,.16666666666666666]),s[1]-u(s,[.16666666666666666,.16666666666666666,.16666666666666666]),s[2]-u(s,[.16666666666666666,.16666666666666666,.16666666666666666])];const T=[t[0]-l[0],t[1]-l[1],t[2]-l[2]],j=[t[0]-h[0],t[1]-h[1],t[2]-h[2]],k=[t[0]-a[0],t[1]-a[1],t[2]-a[2]],B=[t[0]-m[0],t[1]-m[1],t[2]-m[2]];if(d3(v3(n,[0,0,0]))){let S=[l[0],h[0],a[0],m[0]],D=[l[1],h[1],a[1],m[1]],E=[l[2],h[2],a[2],m[2]];n[0]>0&&(S=K(S,n[0])),n[1]>0&&(D=K(D,n[1])),n[2]>0&&(E=K(E,n[2])),l=[S[0],D[0],E[0]],h=[S[1],D[1],E[1]],a=[S[2],D[2],E[2]],m=[S[3],D[3],E[3]],e=[l[0]+u(l,[.3333333333333333,.3333333333333333,.3333333333333333]),l[1]+u(l,[.3333333333333333,.3333333333333333,.3333333333333333]),l[2]+u(l,[.3333333333333333,.3333333333333333,.3333333333333333])],i=[h[0]+u(h,[.3333333333333333,.3333333333333333,.3333333333333333]),h[1]+u(h,[.3333333333333333,.3333333333333333,.3333333333333333]),h[2]+u(h,[.3333333333333333,.3333333333333333,.3333333333333333])],f=[a[0]+u(a,[.3333333333333333,.3333333333333333,.3333333333333333]),a[1]+u(a,[.3333333333333333,.3333333333333333,.3333333333333333]),a[2]+u(a,[.3333333333333333,.3333333333333333,.3333333333333333])],s=[m[0]+u(m,[.3333333333333333,.3333333333333333,.3333333333333333]),m[1]+u(m,[.3333333333333333,.3333333333333333,.3333333333333333]),m[2]+u(m,[.3333333333333333,.3333333333333333,.3333333333333333])],e=F([e[0]+.5,e[1]+.5,e[2]+.5]),i=F([i[0]+.5,i[1]+.5,i[2]+.5]),f=F([f[0]+.5,f[1]+.5,f[2]+.5]),s=F([s[0]+.5,s[1]+.5,s[2]+.5])}const M=r3(u3.add([],r3(u3.add([],r3([e[2],i[2],f[2],s[2]]),[e[1],i[1],f[1],s[1]])),[e[0],i[0],f[0],s[0]])),s3=[M[0]*3.883222077,M[1]*3.883222077,M[2]*3.883222077,M[3]*3.883222077],c=[M[0]*-.006920415+.996539792,M[1]*-.006920415+.996539792,M[2]*-.006920415+.996539792,M[3]*-.006920415+.996539792];let _=[M[0]*.108705628,M[1]*.108705628,M[2]*.108705628,M[3]*.108705628];const L=e3(s3),m3=c3(s3),g3=a3([1-c[0]*c[0],1-c[1]*c[1],1-c[2]*c[2],1-c[3]*c[3]]);let G=[0,0,0,0],H=[0,0,0,0],I=[0,0,0,0];const w=m3,z=[-L[0],-L[1],-L[2],-L[3]],N=[0,0,0,0],O=[c[0]*z[0],c[1]*z[1],c[2]*z[2],c[3]*z[3]],Q=[-c[0]*w[0],-c[1]*w[1],-c[2]*w[2],-c[3]*w[3]],R=g3;_=[_[0]+r,_[1]+r,_[2]+r,_[3]+r];const v=c3(_),d=e3(_);G=[d[0]*O[0]+v[0]*w[0],d[1]*O[1]+v[1]*w[1],d[2]*O[2]+v[2]*w[2],d[3]*O[3]+v[3]*w[3]],H=[d[0]*Q[0]+v[0]*z[0],d[1]*Q[1]+v[1]*z[1],d[2]*Q[2]+v[2]*z[2],d[3]*Q[3]+v[3]*z[3]],I=[d[0]*R[0]+v[0]*N[0],d[1]*R[1]+v[1]*N[1],d[2]*R[2]+v[2]*N[2],d[3]*R[3]+v[3]*N[3]];const U=[G[0],H[0],I[0]],V=[G[1],H[1],I[1]],W=[G[2],H[2],I[2]],X=[G[3],H[3],I[3]];let g=[u(T,T),u(j,j),u(k,k),u(B,B)].map(function(S){return .5-S});g=l3(g,0);const C=[g[0]*g[0],g[1]*g[1],g[2]*g[2],g[3]*g[3]],p=[C[0]*g[0],C[1]*g[1],C[2]*g[2],C[3]*g[3]],J=[u(U,T),u(V,j),u(W,k),u(X,B)],p3=u(p,J),q=[-6*C[0]*J[0],-6*C[1]*J[1],-6*C[2]*J[2],-6*C[3]*J[3]],y=[p[0]*U[0]+q[0]*T[0],p[0]*U[1]+q[0]*T[1],p[0]*U[2]+q[0]*T[2]],x=[p[1]*V[0]+q[1]*j[0],p[1]*V[1]+q[1]*j[1],p[1]*V[2]+q[1]*j[2]],t3=[p[2]*W[0]+q[2]*k[0],p[2]*W[1]+q[2]*k[1],p[2]*W[2]+q[2]*k[2]],n3=[p[3]*X[0]+q[3]*B[0],p[3]*X[1]+q[3]*B[1],p[3]*X[2]+q[3]*B[2]];return o[0]=39.5*(y[0]+x[0]+t3[0]+n3[0]),o[1]=39.5*(y[1]+x[1]+t3[1]+n3[1]),o[2]=39.5*(y[2]+x[2]+t3[2]+n3[2]),39.5*p3}function K(t,n){return t.length?n.length?t.map(function(r,o){return r===0||n[o]===0?0:r%n[o]}):t.map(function(r,o){return r===0||n===0?0:r%n}):t%n}function u(t,n){let r=0;for(let o=0;o<t.length;o++)r+=t[o]*n[o];return r}function F(t){return t.length?t.map(F):Math.floor(t)}function h3(t){return t.length?t.map(h3):t-Math.floor(t)}function o3(t,n){return!n&&!t?0:n.length?t.length?n.map(function(r,o){return o3(t[o],r)}):n.map(function(r,o){return o3(t,r)}):n<t?0:1}function M3(t,n){return t.length?n.length?t.map(function(r,o){return Math.min(r,n[o])}):t.map(function(r,o){return Math.min(r,n)}):Math.min(t,n)}function l3(t,n){return t.length?n.length?t.map(function(r,o){return Math.max(r,n[o])}):t.map(function(r,o){return Math.max(r,n)}):Math.max(t,n)}function v3(t,n){if(t.length){const r=Array(t.length);for(let o=0;o<t.length;o++)r[o]=t[o]>n[o];return r}return t>n}function d3(t){return t.some(function(n){return n})}function u3(t,n,r,o){return t==null&&(t=0),n==null&&(n=t),r==null&&(r=n),o==null&&(o=r),[t,n,r,o]}u3.add=function(n,r,o){return n[0]=r[0]+o[0],n[1]=r[1]+o[1],n[2]=r[2]+o[2],n[3]=r[3]+o[3],n};function e3(t){return t.length?t.map(e3):Math.cos(t)}function c3(t){return t.length?t.map(c3):Math.sin(t)}function a3(t){return t.length?t.map(a3):Math.sqrt(t)}function r3(t){const n=K(t,289);return K([(n[0]*34+10)*n[0],(n[1]*34+10)*n[1],(n[2]*34+10)*n[2],(n[3]*34+10)*n[3]],289)}export{q3 as p};
